global
    # Specify global settings here

defaults
    # Specify default settings here

frontend http_front
    bind *:9090
    mode http

    # Define ACL to match the route path /clientes/1/transacoes
    acl clientes_transacoes path_beg /clientes/1/transacoes

    # Extract the ID "1" from the path and use it for session stickiness
    reqrep ^([^\ :]*)\ /clientes/([0-9]+)/transacoes(.*) \1\ /transacoes\3
    use_backend clientes_transacoes_backend if clientes_transacoes

backend clientes_transacoes_backend
    mode http

    # Stick sessions based on the extracted ID
    stick-table type string len 32 size 100k
    stick on req.hdr(Host) req.hdr(X-Forwarded-For) req.hdr(User-Agent) path

    # Define backend server(s) for handling requests
    server backend1 web01:8080 # Replace with your server IP and port
    server backend2 web02:8080 # Replace with your server IP and port
    # Add more servers if needed
